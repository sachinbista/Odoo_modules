<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="0">

        <template id="report_picking_inherit" inherit_id="stock.report_picking" priority="1">
            <!-- Replace Barcode with QR in Header section above addresses -->
            <xpath expr="//div[@name='right_box']/div" position="replace">
                <t t-if="o.get_qr_picking_operations_settings()">
                    <div>
                        <img t-att-src="'/report/barcode/?barcode_type=QR&amp;value=%s&amp;width=150&amp;height=150&amp;humanreadable=1' % o.name"/>
                    </div>
                </t>
                <t t-else="">
                    <div t-field="o.name"
                         t-options="{'widget': 'barcode', 'width': 600, 'height': 100, 'img_style': 'width:300px;height:50px;'}"/>
                </t>
            </xpath>

            <!-- Replace Barcode with QR for product lines for Lot/Serial No.s -->
            <xpath expr="//div[@t-if='has_serial_number and (ml.lot_id or ml.lot_name)']" position="replace">
                <t t-if="o.get_qr_picking_operations_settings()">
                    <div t-if="has_serial_number and (ml.lot_id or ml.lot_name)">
                        <img t-att-src="'/report/barcode/?barcode_type=QR&amp;value=%s&amp;width=50&amp;height=50&amp;humanreadable=1' % ml.lot_id.name or ml.lot_name"/>
                    </div>
                </t>
                <t t-else="">
                    <div t-if="has_serial_number and (ml.lot_id or ml.lot_name)" t-esc="ml.lot_id.name or ml.lot_name"
                         t-options="{'widget': 'barcode', 'humanreadable': 1, 'width': 400, 'height': 100, 'img_style': 'width:100%;height:35px;'}"/>
                </t>
            </xpath>

            <!-- Replace Barcode with QR for product lines for Product's Barcode field -->
            <xpath expr="//div[@t-field='ml.product_id.barcode']" position="replace">
                <t t-if="o.get_qr_picking_operations_settings()">
                    <div>
                        <img t-att-src="'/report/barcode/?barcode_type=QR&amp;value=%s&amp;width=50&amp;height=50&amp;humanreadable=1' % ml.product_id.barcode"/>
                    </div>
                </t>
                <t t-else="">
                    <div t-field="ml.product_id.barcode"
                         t-options="{'widget': 'barcode', 'symbology': 'auto', 'width': 400, 'height': 100, 'quiet': 0, 'img_style': 'height:35px;'}"/>
                </t>
            </xpath>

            <!-- Replace Barcode with QR for packages' details -->
            <xpath expr="//div[@t-field='package.package_id.name']" position="replace">
                <t t-if="o.get_qr_picking_operations_settings()">
                    <div>
                        <img t-att-src="'/report/barcode/?barcode_type=QR&amp;value=%s&amp;width=100&amp;height=100&amp;humanreadable=1' % package.package_id.name"/>
                    </div>
                </t>
                <t t-else="">
                    <div t-field="package.package_id.name"
                         t-options="{'widget': 'barcode', 'humanreadable': 1, 'width': 600, 'height': 100, 'img_style': 'width:300px;height:50px;margin-left: -50px;'}"/>
                </t>
            </xpath>

            <!-- Package Barcode -->
            <xpath expr="//t[@t-set='has_serial_number']" position="after">
                <t t-set="has_package" t-value="any(move_line.result_package_id for move_line in o.move_line_ids)"/>
            </xpath>
            <xpath expr="//thead//th[@name='th_barcode']" position="after">
                <th name="th_package_barcode" class="text-center" t-if="has_package">
                    <strong>Package Barcode</strong>
                </th>
            </xpath>
            <xpath expr="//tbody/t/tr" position="inside">
                <td name = "td_package_barcode" t-if="has_package">
                    <t t-if = "ml.result_package_id">
                        <t t-if="o.get_qr_picking_operations_settings()">
                            <div>
                                <img t-att-src="'/report/barcode/?barcode_type=QR&amp;value=%s&amp;width=50&amp;height=50&amp;humanreadable=1' % ml.result_package_id.name"/>
                            </div>
                        </t>
                        <t t-else="">
                            <div t-field="ml.result_package_id.name"
                                 t-options="{'widget': 'barcode', 'humanreadable': 1, 'width': 600, 'height': 100, 'img_style': 'width:100%;height:35px;'}"/>
                        </t>
                    </t>
                </td>
            </xpath>
            <!-- spacing inside To/From -->
            <xpath expr="//span[@t-esc='ml.location_id.display_name']" position="after">
                <span><br/></span>               
            </xpath>
            <xpath expr="//span[@t-field='ml.location_dest_id']" position="after">
                <span><br/></span>                    
            </xpath>
        </template>
    </data>
</odoo>