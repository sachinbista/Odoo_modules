<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="shopify_export_refund_view" model="ir.ui.view">
        <field name="name">shopify.export.refund.view</field>
        <field name="model">shopify.export.refund</field>
        <field name="arch" type="xml">
            <form string="Refund Order in Shopify">
                <group col="4">
                    <field name="restock_type" required="1"/>
                    <field name="location_id" attrs="{'invisible': [('restock_type', '!=', 'cancel')], 'required': [('restock_type', '=', 'cancel')]}" domain="[('shopify_config_id', '=', shopify_config_id), ('shopify_location_id', '!=', False)]" options="{'no_create_edit': True}"/>
                    <field name="credit_note_id" invisible="1"/>
                    <field name="currency_id" invisible="1" force_save="1"/>
                    <field name="order_shipping_amount" invisible="1" force_save="1"/>
                    <field name="shopify_config_id" invisible="1"/>
                    <field name="no_lines" invisible="1" force_save="1"/>
                </group>
                <group>
                    <field name="refund_line_ids" nolabel="1" attrs="{'invisible': [('no_lines', '=', True)]}">
                        <tree editable="top" create="0" delete="0">
                            <field name="product_id" readonly="1" force_save="1"/>
                            <field name="quantity" readonly="1" force_save="1"/>
                            <field name="shopify_config_id" invisible="1"/>
                            <field name="location_id" attrs="{'column_invisible': [('parent.restock_type', 'not in', ['return', 'cancel'])], 'required': [('parent.restock_type', 'in', ['return', 'cancel'])]}" domain="[('shopify_config_id', '=', shopify_config_id), ('shopify_location_id', '!=', False)]" options="{'no_create_edit': True}" force_save="1"/>
                            <field name="shopify_line_id" invisible="1"/>
                        </tree>
                    </field>
                </group>
                <group col="6">
                    <group colspan="4">
                        <field name="is_notify_customer"/>
                        <field name="refund_reason" required="1"/>
                    </group>
                    <group class="oe_right" colspan="2">
                        <field name="shipping_refund_amount" widget='monetary'
                                   options="{'currency_field': 'currency_id'}" readonly="1" force_save="1"/>
                        <field name="total_refund_amount" widget='monetary'
                                   options="{'currency_field': 'currency_id'}" readonly="1" force_save="1"/>
                    </group>
                </group>
                <footer>
                    <button name="refund_in_shopify" string="Refund In Shopify"
                            type="object" class="oe_highlight"/>
                    <button string="Cancel" class="oe_highlight" special="cancel"/>
                </footer>
            </form>
        </field>
    </record>


</odoo>