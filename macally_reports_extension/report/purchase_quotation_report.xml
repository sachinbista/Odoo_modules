<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="report_purchasequotation_document_inherit" inherit_id="purchase.report_purchasequotation_document">
        <xpath expr="//t[@t-call='web.external_layout']" position="attributes">
            <attribute name="t-call">macally_reports_extension.external_layout_inherit</attribute>
        </xpath>
        <xpath expr="//t[@t-set='address']/div" position="before">
            <strong>Vendor:</strong>
        </xpath>
        <xpath expr="//table" position="before">
            <div class="row">
                <div t-if="o.date_order" class="col-2">
                    <strong>Order Deadline:</strong>
                    <p t-field="o.date_order" class="m-0" t-options='{"widget": "date"}'/>
                </div>
                <div t-if="o.ship_via_id.name" class="col-2">
                    <strong>Ship Via:</strong>
                    <p t-field="o.ship_via_id.name" class="m-0"/>
                </div>
                <div t-if="o.fob" class="col-2">
                    <strong>FOB:</strong>
                    <p t-field="o.fob" class="m-0"/>
                </div>
                 <div t-if="o.date_planned" class="col-2">
                    <strong>Req Ship Date:</strong>
                    <p t-field="o.date_planned" class="m-0" t-options='{"widget": "date"}'/>
                </div>
                <div t-if="o.vendor_payment_terms_id.name" class="col-3 ">
                    <strong>Terms:</strong>
                    <p t-field="o.vendor_payment_terms_id.name" class="m-0"/>
                </div>

            </div>
        </xpath>
        <xpath expr="//table" position="replace">
            <table style="width:100%; margin-top:4%;">
                <thead style="display: table-row-group">
                    <tr style="background-color:#D3D3D3;">
                        <th name="th_sku" class="text-center" style="padding:4px;border:1px solid black;">
                            <strong>Item Number</strong>
                        </th>
                        <th name="th_description" style="padding:4px;border:1px solid black;">
                            <strong>Description</strong>
                        </th>
                        <th name="th_quantity" class="text-end" style="padding:4px;border:1px solid black;width:30%;">
                            <strong>Qty</strong>
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <t t-foreach="o.order_line" t-as="order_line">
                        <tr t-att-class="'bg-200 fw-bold o_line_section' if order_line.display_type == 'line_section' else 'fst-italic o_line_note' if order_line.display_type == 'line_note' else ''">
                            <t t-if="not order_line.display_type">
                                <td id="product" style="border:1px solid black; padding:4px;">
                                    <span t-field="order_line.product_id.default_code"/>
                                </td>
                                <td id="product" style="border:1px solid black; padding:4px;">
                                    <span t-esc="order_line.product_name()"/>

                                </td>
                                <td class="text-end" style="border:1px solid black; padding:4px;">
                                    <span t-field="order_line.product_qty"/>
                                    <span t-field="order_line.product_uom" groups="uom.group_uom"/>
                                    <span t-if="order_line.product_packaging_id">
                                        (
                                        <span t-field="order_line.product_packaging_qty"
                                              t-options='{"widget": "integer"}'/>
                                        <span t-field="order_line.product_packaging_id"/>)
                                    </span>
                                </td>
                            </t>
                            <t t-else="">
                                <td colspan="99" id="section">
                                    <span t-field="order_line.name"/>
                                </td>
                            </t>
                        </tr>
                    </t>
                </tbody>
            </table>
        </xpath>
    </template>
</odoo>