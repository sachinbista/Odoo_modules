<?xml version="1.0" encoding="UTF-8"?>
	<templates id="pos_payment_template" inherit_id="point_of_sale.template" xml:space="preserve">
   

	<t t-name="CreatePaymentButtonWidget"  owl="1">
		<div class="control-button odoo-theme-color">
			<i class="fa fa-money"></i>
			<span> </span>
			<span>Payment</span>
		</div>
	</t>

	<t t-name="SeeAllInvoicesButtonWidget"  owl="1">
		<div class="control-button odoo-theme-color">
			<i class="fa fa-money"></i>
			<span> </span>
			<span>Invoice</span>
		</div>
	</t>

	<t t-name="PartnerListScreen" t-inherit="point_of_sale.PartnerListScreen" t-inherit-mode="extension" owl="1">
		<xpath expr="//PartnerLine" position="replace">
			<PartnerLine partner="partner"
				selectedPartner="state.selectedPartner"
				detailIsShown="state.detailIsShown"
				isBalanceDisplayed="isBalanceDisplayed"
				onClickEdit.bind="editPartner"
				onClickShowOrder.bind="showOrders"
				onRegisterPayment.bind="registerPayment"
				onClickPartner.bind="clickPartner"
				/>
		</xpath>
	</t>

	<t t-name="PartnerLine" t-inherit="point_of_sale.PartnerLine" t-inherit-mode="extension" owl="1">
		<xpath expr="//tr" position="inside">
			<t t-if="env.pos.config.allow_pos_payment">
				<td class='order-partner-order' t-att-data-id='props.partner.id'
				t-on-click.stop="() => props.onRegisterPayment(props.partner)"
				>
					<button><i class="fa fa-university"></i>Register Payment</button>
				</td>
			</t>
		</xpath>
	</t>
	
	<t t-name="POSInvoiceScreen" owl="1">
		<div class="partnerlist-screen screen">
			<div class="screen-content orders-screen">
				<div class="top-content">
					<div class="button back odoo-theme-color" t-on-click="cancel">
						<t t-if="!env.isMobile">Discard</t>
						<t t-else="">
							<i class="fa fa-undo"></i>
						</t>
					</div>
					<div class="button refresh-order odoo-theme-color" t-on-click="refresh_orders">
						<i class='fa fa-refresh'></i>
					</div>
					<!-- <div class="searchbox-partner top-content-center">
						<input placeholder="Search Orders" size="1" t-on-keyup="updateOrderList" class="input-search-orders"/>
					</div> -->
				</div>
				<section class="full-content">
					<div class="partner-window">
						<section class="subwindow collapsed">
							<div class="subwindow-container collapsed">
							</div>
						</section>
						<section class="subwindow list">
							<div class="subwindow-container">
								<div  class="subwindow-container-fix scrollable-y">
									<table class="partner-list">
										<thead>
											<tr class="odoo-theme-color">
												<th class="order_ref">Invoice</th>
												<th class="receipt_ref">Customer Ref</th>
												<th class="order_cstmr">Total Amount</th>
												<th class="order_date">Due Amount</th>
												<th class="order_state">State</th>
												<th class="order_state">Payment State</th>
											</tr>
										</thead>
										<tbody class="posorders-list-contents">
											<t t-if="!invoices">
												<tr>
													<td>Loading....</td>
												</tr>
											</t>
											<t t-foreach="invoices" t-as="order"
											   t-key="order.id">
												<POSInvoice order="order" selectedPosOrder="state.selectedPosOrder" onClickPosOrder.bind="clickPosOrder" />
											</t>
										</tbody>
									</table>
								</div>
							</div>
						</section>
					</div>
				</section>
			</div>
		</div>
	</t>

	<t t-name="POSInvoice" owl="1">
		<tr t-attf-class="partner-line {{highlight}}" t-att-data-id="props.order.id"
			t-on-click="() => this.props.onClickPosOrder(props.order)">
			<td class='order-name' t-att-data-id='props.order.id'>
				<t t-esc='props.order.name' />
			</td>
			<td class='order-partner' t-att-data-id='props.order.id'>
				<t t-esc='props.order.partner_id[1] or ""' />
			</td>
			<td class='order-date' t-att-data-id='props.order.id'>
				<t t-if="env.pos.currency.id == props.order.currency_id[0]">
					<t t-esc='env.pos.format_currency(props.order.amount_total)' />	
				</t>
				<t t-else="">
					<t t-foreach="env.pos.poscurrency" t-as="curr" t-key="curr.id">

						<t t-if="curr.id == props.order.currency_id[0]">
							<t t-if="curr.position == 'after'">
								<t t-esc="(props.order.amount_total).toFixed(2)"/> <t t-esc="curr.symbol"/>
							</t>
							<t t-else="">
								<t t-esc="curr.symbol"/> <t t-esc="(props.order.amount_total).toFixed(2)"/>
							</t>
						</t>
					</t> 
				</t>
			</td>
			<td class='order-tot' t-att-data-id='props.order.id'>
				<t t-if="env.pos.currency.id == props.order.currency_id[0]">
					<t t-esc='env.pos.format_currency(props.order.amount_residual)' />	
				</t>
				<t t-else="">
					<t t-foreach="env.pos.poscurrency" t-as="curr" t-key="curr.id">

						<t t-if="curr.id == props.order.currency_id[0]">
							<t t-if="curr.position == 'after'">
								<t t-esc="(props.order.amount_residual).toFixed(2)"/> <t t-esc="curr.symbol"/>
							</t>
							<t t-else="">
								<t t-esc="curr.symbol"/> <t t-esc="(props.order.amount_residual).toFixed(2)"/>
							</t>
						</t>
					</t> 
				</t>
			</td>
			<td class='order-state' t-att-data-id='props.order.id'>
				<t t-if="props.order.state == 'draft'">Draft/New</t>
				<t t-if="props.order.state == 'posted'">Posted</t>
				<t t-if="props.order.state == 'cancel'">Cancelled</t>
			</td>
			<td class='order-payment-state' t-att-data-id='props.order.id'>
				<t t-if="props.order.payment_state == 'not_paid'">Not Paid</t>
				<t t-if="props.order.payment_state == 'in_payment'">In Payment</t>
				<t t-if="props.order.payment_state == 'paid'">Paid</t>
				<t t-if="props.order.payment_state == 'partial'">Partially Paid</t>
				<t t-if="props.order.payment_state == 'reversed'">Reversed</t>
				<t t-if="props.order.payment_state == 'invoicing_legacy'">Invoicing App Legacy</t>
			</td>
		</tr>
	</t>

	<t t-name="PosInvoiceDetail" owl="1">
		<div role="dialog" class="modal-dialog">
			<Draggable>
				<div class="popup bi-popup-width">
					<header class="title drag-handle">
						Invoice Details
					</header>
					<main class="body traceback" style="font-family: 'Lato-Reg';">
						<t t-set="order" t-value="props.order || []"/>
						<table style='width:100%'>
							<tr class="popup-tr">
								<td style='width:20%; '><strong>Customer:</strong>
								</td>
								<td style='width:30%; '  t-if="order['partner_id']">
									<span t-esc="order['partner_id'][1] or ''"/>
								</td>
								<td style='width:20%; '><strong>Amount Due:</strong>
								</td>
								<td style='width:30%; '>    
									<t t-if="env.pos.currency.id == props.order.currency_id[0]">
										<t t-esc='env.pos.format_currency(props.order.amount_residual)' />	
									</t>
									<t t-else="">
										<t t-foreach="env.pos.poscurrency" t-as="curr" t-key="curr.id">

											<t t-if="curr.id == props.order.currency_id[0]">
												<t t-if="curr.position == 'after'">
													<t t-esc="(props.order.amount_residual).toFixed(2)"/> <t t-esc="curr.symbol"/>
												</t>
												<t t-else="">
													<t t-esc="curr.symbol"/> <t t-esc="(props.order.amount_residual).toFixed(2)"/>
												</t>
											</t>
										</t> 
									</t>
								</td>
							</tr>
							<tr class="popup-tr">
								<td style='width:20%; '><strong>Total Amount:</strong>
								</td>
								<td style='width:30%; '>    
									<t t-if="env.pos.currency.id == props.order.currency_id[0]">
										<t t-esc='env.pos.format_currency(props.order.amount_total)' />	
									</t>
									<t t-else="">
										<t t-foreach="env.pos.poscurrency" t-as="curr" t-key="curr.id">

											<t t-if="curr.id == props.order.currency_id[0]">
												<t t-if="curr.position == 'after'">
													<t t-esc="(props.order.amount_total).toFixed(2)"/> <t t-esc="curr.symbol"/>
												</t>
												<t t-else="">
													<t t-esc="curr.symbol"/> <t t-esc="(props.order.amount_total).toFixed(2)"/>
												</t>
											</t>
										</t> 
									</t>
								</td>
								<td style='width:20%; '><strong>Status:</strong>
								</td>
								<td style='width:30%; '>
									<t t-if="order['state'] == 'draft'">Draft/New</t>
									<t t-if="order['state'] == 'posted'">Posted</t>
									<t t-if="order['state'] == 'cancel'">Cancelled</t>    
								</td>
							</tr>
						</table>
						<br/>
					</main>
					<footer class="footer">
						<div class="button confirm" id="create_customer_payment" t-on-click="register_payment">
							Payment
						</div>
						<div class="button cancel odoo-theme-color" t-on-click="cancel">
							Close
						</div>
					</footer>
				</div>
			</Draggable>
		</div>
	</t>

	<t t-name="RegisterPaymentPopupWidget" owl="1">
		<div role="dialog" class="modal-dialog">
			<div class="popup popup-confirm" style="height: 400px !important;">
				<p class="title">
					<t t-esc="props.title" />
				</p>

				<div class="body" >
					<p style="height: 30px;">Enter Payment Details Here</p><br/>

					<div style="text-align: left; margin-left: 37px;">
						<label style="text-align:left"> Payment Journal:  </label>
						<select id="payment_type" class='detail' name='type' style="height: 35px;width: 59%;float: right;   margin-right: 6%;">
							<t t-foreach='env.pos.journals' t-as='jrn' t-key="jrn.id">
								<option t-att-value='jrn.id'> 
									<t t-esc='jrn.name'/>
								</option>
							</t>
						</select>
					</div><br/>
					<div style="text-align: left; margin-left: 37px;">
						<label style="text-align:left"> Amount:  </label><input id ="entered_amount" type="text" class="input-field" name="code" style="height: 35px;width: 59%;float: right;   margin-right: 6%;"></input>
					</div><br/>
					<div style="text-align: left; margin-left: 37px;margin-top: 2%;">
						<label style="text-align:left">Payment Note:  </label><input id ="entered_note" type="text" class="input-field" name="code" style="height: 35px;width: 59%;float: right;   margin-right: 6%;"></input>
					</div>
				</div>
				<div class="footer" style="position:fixed; bottom:0;">
					<div class="button cancel" id="cancel_coupon_code" style="background-color: #652c55 !important; color: #fff;" t-on-click="cancel">
						<t t-esc="props.cancelText" /> 
					</div>
					<div class="button confirm" id="create_customer_payment" style="background-color: #652c55 !important; color: #fff;" t-on-click="register_payment">
						<t t-esc="props.confirmText" />
					</div>
				</div>
			</div>
		</div>
	</t>

	<t t-name="RegisterInvoicePaymentPopupWidget" owl="1">
		<div role="dialog" class="modal-dialog">
			<div class="popup popup-confirm" style="height: 400px !important;">
				
				<p class="title">
					<t t-esc="props.title" />
				</p>
				
				<div class="body">
					<p>Enter Payment Details Here</p><br/>
					<div style="text-align: left; margin-left: 37px;">
						<label style="text-align:left"> Payment Journal:  </label>
						<select id="payment_type1" class='detail' name='type' style="height: 35px;width: 59%;float: right;   margin-right: 6%;">
							<t t-foreach='env.pos.journals' t-as='jrn' t-key='jrn.id'>
								<option t-att-value='jrn.id'> 
									<t t-esc='jrn.name'/>
								</option>
							</t>
						</select>
					</div><br/>
					<div style="text-align: left; margin-left: 37px;">
						<label style="text-align:left"> Amount:  </label><input id ="entered_amount1" type="text" class="input-field" name="code" style="height: 35px;width: 59%;float: right;   margin-right: 6%;"></input>
					</div><br/>
					<div style="text-align: left; margin-left: 37px;margin-top: 2%;">
						<label style="text-align:left"> Payment Note:  </label><input id ="entered_note1" type="text" class="input-field" name="code" style="height: 35px;width: 59%;float: right;   margin-right: 6%;"></input>
					</div>
				</div>

				<div class="footer" style="position:fixed; bottom:0;">
					<div class="button cancel" id="cancel_coupon_code" style="background-color: #652c55 !important; color: #fff;" t-on-click="cancel">
						<t t-esc="props.cancelText" /> 
					</div>
					<div class="button confirm" id="create_customer_payment" style="background-color: #652c55 !important; color: #fff;" t-on-click="register_payment">
						<t t-esc="props.confirmText" />
					</div>
				</div>
				
			</div>
		</div>
	</t>
	
</templates>
