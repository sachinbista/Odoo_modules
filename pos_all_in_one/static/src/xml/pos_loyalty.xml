<?xml version="1.0" encoding="UTF-8"?>
	<templates id="pos_loyalty_odoo_template" inherit_id="point_of_sale.template" xml:space="preserve">

		<t t-name="OrderWidget" t-inherit="point_of_sale.OrderWidget" t-inherit-mode="extension" owl="1">
			<xpath expr="//div[hasclass('order')]" position="inside">
				<t t-if="partner and loyalty_points">
					<!-- <span class="Raghav">
						Raghav
						<t t-esc="loyalty_points"/>
					</span> -->
					<div class='loyalty-items' style="padding-bottom: 10px;padding-left: 15px;"><i><b style="font-weight: bold;color: #017e84;font-size: 20px;">
						+ <span><t t-esc="loyalty_points"/></span> Loyalty Points. Total:<span><t t-esc="(temp_loyalty_point).toFixed(2)"/></span></b></i>
					</div>
				</t>
			</xpath>
		</t>

		<!-- PartnerDetailsEdit -->
		<t t-extend="PartnerDetailsEdit" t-inherit="point_of_sale.PartnerDetailsEdit" t-inherit-mode="extension" owl="1">
			<xpath expr="//div[hasclass('partner-details-left')]" position="inside">
				<div class="partner-detail">
					<span class='label'>Loyalty Points</span>
					<t t-if="props.partner.loyalty_points1">
						<span> <t t-esc='(props.partner.loyalty_points1).toFixed(2)'/></span>
					</t>
					<t t-else="">
						<span>0</span>
					</t>
				</div>
			</xpath>
		</t>


		<!-- PartnerListScreen -->
		<t t-extend="PartnerListScreen" t-inherit="point_of_sale.PartnerListScreen" t-inherit-mode="extension" owl="1">
			<xpath expr="//table//thead//tr" position="inside">
				<th>Loyalty Points</th>
			</xpath>
		</t>

		<!-- PartnerLine -->
		<t t-extend="PartnerLine" t-inherit="point_of_sale.PartnerLine" t-inherit-mode="extension" owl="1">
			<xpath expr="//tr" position="inside">
				<td class="text-center">
					<center><t t-esc='(props.partner.loyalty_points1).toFixed(2) or "0"' /></center>
				</td>
			</xpath>
		</t>		   


		<!-- LoyaltyButtonWidget -->
		<t t-name="LoyaltyButton" owl="1">
			<span class="control-button loyalty-button" style="background: #875a7b !important;color: white !important;">
				<i class="fa fa-gift"></i>
				<span>Redeem</span>
			</span>
		</t>

		<!-- LoyaltyPopupWidget -->  

		<t t-name="LoyaltyPopupWidget" owl="1">
			<div role="dialog" class="modal-dialog">
				<Draggable>
					<div class="popup" style="min-width: 50%;">
						<header class="title drag-handle">
							Loyalty Reedemption
						</header>
						<main class="body" style="font-family: 'Lato-Reg';">
							<div>
								<p style="color: #875a7b;">Hello <b><t t-esc="props.partner.name"/> !!! </b></p>
								<p style="color: #875a7b;">Your Loyalty Points: <b><t t-esc="(props.partner.loyalty_points1).toFixed(2)"/></b>Point(s) </p>
								<p  style="color: #875a7b;">Your Loyalty Balance: 
									<b><t t-esc="env.pos.format_currency(props.partner.loyalty_amount)"/></b>
								</p>
								<div>
									<p style="color: #875a7b;">Enter number of points to Redeem: </p>
									<input id ="entered_item_qty" type="text" placeholder="Enter points to redeem" class="input-field" name="code"></input>
								</div>
							</div>
						</main>
						<footer class="footer">
							<div style="background: #875a7b;color: #ffff;" class="button cancel odoo-theme-button" t-on-click="cancel">Close</div>
							<div style="background: #875a7b;color: #ffff;" class="button confirm odoo-theme-button" t-on-click="redeemPoints">Reedem Now </div>
						</footer>
					</div>
				</Draggable>
			</div>
		</t>
			
		<t t-name="OrderReceipt" t-inherit="point_of_sale.OrderReceipt" t-inherit-mode="extension" owl="1">
			<xpath expr="//div[hasclass('before-footer')]" t-operation="before">
				<table class='receipt-change' style="min-width: 100%;">
					<t t-if="props.order.get_partner()">
						<tr>
							<td>Earned Loyalty Points:</td>
							<td class="pos-right-align"><t t-esc="props.order.get_total_loyalty()"/></td>
						</tr>
						<tr>
							<td>Total Loyalty Points:</td>
							<td class="pos-right-align"><t t-esc="(props.order.get_partner().loyalty_points1 + props.order.get_total_loyalty()).toFixed(2)"/></td>
						</tr>
					</t>
				</table>
			</xpath>
		</t>
		
	</templates>
	
	
